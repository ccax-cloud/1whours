<!DOCTYPE html>
<!-- saved from url=(0037)file:///D:/H/Learning/progress1w.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <title>10,000 Hours Journey</title>
    <link id="dynamic-favicon" rel="icon" href="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Crect%20x%3D%225%22%20y%3D%221%22%20width%3D%226%22%20height%3D%2214%22%20fill%3D%22%23FFD700%22%2F%3E%3Crect%20x%3D%223%22%20y%3D%222%22%20width%3D%2210%22%20height%3D%2212%22%20fill%3D%22%23FFD700%22%2F%3E%3Crect%20x%3D%222%22%20y%3D%223%22%20width%3D%2212%22%20height%3D%2210%22%20fill%3D%22%23FFD700%22%2F%3E%3Crect%20x%3D%221%22%20y%3D%225%22%20width%3D%2214%22%20height%3D%226%22%20fill%3D%22%23FFD700%22%2F%3E%3C%2Fsvg%3E">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');

        :root {
            --bg-main: #050505; --bg-pattern: #1a1a1a; --container-bg: #0d0d0d;
            --text-primary: #33ff33; --text-secondary: #e0e0e0;
            --bar-empty: #222; --border-color: #000; --accent-red: #833;
            --btn-hover-bg: #222; --btn-reset-hover: #a33;
        }

        .day-mode {
            --bg-main: #e0e0e0; --bg-pattern: #d0d0d0; --container-bg: #f0f0f0;
            --text-primary: #228b22; --text-secondary: #222;
            --bar-empty: #cccccc; --border-color: #444; --accent-red: #a33;
            --btn-hover-bg: #e0e0e0; --btn-reset-hover: #c44;
        }

        body {
            background-color: var(--bg-main);
            background-image: radial-gradient(var(--bg-pattern) 1px, transparent 1px);
            background-size: 20px 20px;
            color: var(--text-secondary);
            font-family: 'VT323', monospace;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            height: 100vh; margin: 0; overflow: hidden; transition: all 0.5s steps(4);
        }

        #fireworks-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 5; }

        .player-card { width: 500px; position: relative; z-index: 10; perspective: 1000px; }
        .card-inner { position: relative; width: 100%; transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1); transform-style: preserve-3d; }
        .is-flipped .card-inner { transform: rotateY(180deg); }

        .card-face {
            background: var(--container-bg); padding: 30px; border: 4px solid var(--border-color);
            box-shadow: 8px 8px 0px var(--border-color); width: 100%; box-sizing: border-box;
            backface-visibility: hidden; position: relative;
        }

        .card-back { position: absolute; top: 0; left: 0; height: 100%; width: 100%; transform: rotateY(180deg); display: flex; flex-direction: column; justify-content: center; }

        .side-trigger { position: absolute; top: 50%; transform: translateY(-50%) translateZ(10px); width: 50px; height: 200px; cursor: pointer; background: transparent; z-index: 999; }
        .trigger-right { right: 0; }
        .trigger-left { left: 0; }

        .is-flipped .card-face:not(.card-back) .side-trigger { pointer-events: none; }
        .is-flipped .card-back .side-trigger { pointer-events: auto; }
        .player-card:not(.is-flipped) .card-back .side-trigger { pointer-events: none; }

        .orbit-container { position: absolute; top: 25px; right: 25px; width: 48px; height: 48px; z-index: 20; }
        #celestial-body { width: 48px; height: 48px; cursor: pointer; image-rendering: pixelated; }
        #celestial-body svg { width: 100%; height: 100%; }

        /* 时间容器：设置为 relative 方便 edit 按钮定位 */
        .time-box { position: relative; text-align: center; margin-bottom: 10px; display: inline-flex; align-items: center; justify-content: center; width: 100%; }
        
        /* 编辑按钮：放到时间后面一点 */
        .edit-trigger { 
            position: absolute; 
            left: calc(50% + 110px); /* 基于中心向右大幅偏移 */
            top: 50%; 
            transform: translateY(-50%); 
            font-size: 0.8rem; 
            opacity: 0; 
            cursor: pointer; 
            transition: opacity 0.2s; 
            background: var(--text-primary); 
            color: #000; 
            padding: 2px 4px; 
            font-weight: bold; 
            white-space: nowrap; 
        }
        .time-box:hover .edit-trigger { opacity: 1; }
        
        .time-display { font-size: 3.2rem; color: var(--text-primary); text-shadow: 2px 2px 0px var(--border-color); line-height: 1; letter-spacing: 1px; }
        
        .progress-container { height: 14px; background: var(--bar-empty); border: 3px solid var(--border-color); margin: 5px 0 15px 0; }
        .bar-fill { height: 100%; width: 0%; background: #888; transition: width 0.3s; }
        .info-label { font-size: 1.1rem; opacity: 0.7; letter-spacing: 1px; display: flex; justify-content: space-between; margin-top: 5px; }
        .controls { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin-top: 15px; }
        button { background: var(--bar-empty); border: 3px solid var(--border-color); color: var(--text-secondary); padding: 12px 0; font-family: 'VT323', monospace; font-size: 1.4rem; cursor: pointer; box-shadow: 4px 4px 0px var(--border-color); transition: background 0.2s ease; }
        button:hover { background: var(--btn-hover-bg); }
        #reset-btn { background: var(--accent-red); color: white; }

        .heatmap-grid { display: grid; grid-template-columns: repeat(20, 1fr); gap: 4px; background: rgba(0,0,0,0.3); padding: 10px; border: 2px solid var(--border-color); }
        .heat-cell { width: 100%; aspect-ratio: 1/1; background: var(--bar-empty); }
        #quote-container { margin-top: 40px; max-width: 600px; text-align: center; min-height: 50px; z-index: 10; padding: 0 20px; }
        .quote-text { font-size: 1.6rem; color: var(--text-secondary); opacity: 0; transition: opacity 0.8s; }
    </style>
</head>
<body class="day-mode">

<canvas id="fireworks-canvas" width="1283" height="836"></canvas>

<div class="player-card" id="card-root">
    <div class="card-inner">
        <div class="card-face">
            <div class="side-trigger trigger-right" onclick="toggleFlip()" onmouseenter="showTip(&#39;VIEW HEATMAP &gt;&gt;&#39;)" onmouseleave="hideTip()"></div>
            <div class="orbit-container"><div id="celestial-body" title="Switch Mode"><svg viewBox="0 0 16 16"><rect x="5" y="1" width="6" height="14" fill="#FFD700"></rect><rect x="3" y="2" width="10" height="12" fill="#FFD700"></rect><rect x="2" y="3" width="12" height="10" fill="#FFD700"></rect><rect x="1" y="5" width="14" height="6" fill="#FFD700"></rect></svg></div></div>
            <div class="info-label">TOTAL JOURNEY</div>
            <div class="time-box">
                <span class="time-display" id="total-time">0005:30:10</span>
                <div class="edit-trigger" id="edit-total">EDIT</div>
            </div>
            <div class="info-label">TODAY'S RECORD</div>
            <div class="time-box">
                <span class="time-display" id="today-time" style="font-size: 2.2rem;">00:10</span>
                <div class="edit-trigger" id="edit-today">EDIT</div>
            </div>
            <div class="info-label"><span>YEAR PROGRESS</span><span id="year-stats">37/365 DAYS (10.14%)</span></div>
            <div class="progress-container"><div id="year-bar" class="bar-fill" style="width: 10.14%;"></div></div>
            <div class="controls">
                <button id="start-btn">PLAY</button>
                <button id="pause-btn">PAUSE</button>
                <button id="reset-btn">RESET</button>
            </div>
        </div>
        <div class="card-face card-back">
            <div class="side-trigger trigger-left" onclick="toggleFlip()" onmouseenter="showTip(&#39;&lt;&lt; BACK&#39;)" onmouseleave="hideTip()"></div>
            <div class="info-label" style="margin-bottom:15px;">FOCUS HEATMAP (LAST 100 DAYS)</div>
            <div class="heatmap-grid" id="heatmap"><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell"></div><div class="heat-cell" style="background: rgba(34, 139, 34, 0.2);"></div></div>
            <div class="info-label" style="margin-top: 20px; font-size: 0.9rem;">* PROGRESS TRACKER - FOCUS INTENSITY</div>
        </div>
    </div>
</div>

<div id="quote-container"><div id="quote-content" class="quote-text" style="opacity: 1; color: var(--text-secondary);">Progress over perfection.</div></div>

<script>
    let totalSeconds = parseFloat(localStorage.getItem('px_total')) || 0;
    let todaySeconds = parseFloat(localStorage.getItem('px_today')) || 0;
    let historyData = JSON.parse(localStorage.getItem('px_history')) || {};
    let lastCelebrated = parseInt(localStorage.getItem('px_last_milestone')) || 0;
    let isDayMode = localStorage.getItem('px_mode') !== 'night';
    let isRunning = false, timerInterval, originalQuote = "", isFlipping = false, tipTimeout, hideTimeout;

    const sunIcon = `<svg viewBox="0 0 16 16"><rect x="5" y="1" width="6" height="14" fill="#FFD700"/><rect x="3" y="2" width="10" height="12" fill="#FFD700"/><rect x="2" y="3" width="12" height="10" fill="#FFD700"/><rect x="1" y="5" width="14" height="6" fill="#FFD700"/></svg>`;
    const moonIcon = `<svg viewBox="0 0 16 16"><rect x="5" y="1" width="6" height="14" fill="#E0E0E0"/><rect x="3" y="2" width="10" height="12" fill="#E0E0E0"/><rect x="2" y="3" width="12" height="10" fill="#E0E0E0"/><rect x="1" y="5" width="14" height="6" fill="#E0E0E0"/><circle cx="5" cy="6" r="1.5" fill="#BDBDBD"/><circle cx="11" cy="5" r="1.2" fill="#BDBDBD"/><circle cx="8" cy="11" r="1.8" fill="#BDBDBD"/></svg>`;
    const baseQuotes = ["Keep going.", "Believe in yourself.", "Consistency is key.", "Success is a habit.", "Trust the process.", "Progress over perfection."];

    function formatTime(totalSecs) {
        const hrs = Math.floor(totalSecs / 3600);
        const mins = Math.floor((totalSecs % 3600) / 60);
        const secs = Math.floor(totalSecs % 60);
        return `${hrs.toString().padStart(4, '0')}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
    }

    function toggleFlip() {
        if (isFlipping) return;
        isFlipping = true; clearTimeout(tipTimeout); clearTimeout(hideTimeout);
        const content = document.getElementById('quote-content');
        content.style.opacity = 0;
        setTimeout(() => {
            content.style.color = 'var(--text-secondary)';
            content.innerText = originalQuote || baseQuotes[0];
        }, 100);
        document.getElementById('card-root').classList.toggle('is-flipped');
        setTimeout(() => {
            if(document.getElementById('card-root').classList.contains('is-flipped')) initHeatmap();
            content.style.opacity = 1;
            isFlipping = false; 
        }, 650);
    }

    function showTip(text) {
        if (isFlipping) return; 
        clearTimeout(tipTimeout); clearTimeout(hideTimeout);
        const content = document.getElementById('quote-content');
        if (content.style.color !== 'var(--text-primary)') originalQuote = content.innerText;
        content.style.opacity = 0;
        tipTimeout = setTimeout(() => {
            if (isFlipping) return; 
            content.innerText = text;
            content.style.color = 'var(--text-primary)';
            content.style.opacity = 1;
        }, 120);
    }

    function hideTip() {
        if (isFlipping) return; 
        clearTimeout(tipTimeout); clearTimeout(hideTimeout);
        const content = document.getElementById('quote-content');
        content.style.opacity = 0;
        hideTimeout = setTimeout(() => {
            if (isFlipping) return; 
            content.innerText = originalQuote || "Focusing...";
            content.style.color = 'var(--text-secondary)';
            content.style.opacity = 1;
        }, 120);
    }

    function initHeatmap() {
        const heatmap = document.getElementById('heatmap'); heatmap.innerHTML = '';
        const now = new Date();
        for (let i = 99; i >= 0; i--) {
            const date = new Date(); date.setDate(now.getDate() - i);
            const dateStr = date.toLocaleDateString();
            const hours = (historyData[dateStr] || 0) / 3600;
            const cell = document.createElement('div');
            cell.className = 'heat-cell';
            if (hours > 0) {
                let op = Math.min(0.2 + (hours / 5), 1);
                cell.style.background = isDayMode ? `rgba(34, 139, 34, ${op})` : `rgba(51, 255, 51, ${op})`;
            }
            heatmap.appendChild(cell);
        }
    }

    function renderTheme() {
        localStorage.setItem('px_mode', isDayMode ? 'day' : 'night');
        document.body.className = isDayMode ? 'day-mode' : '';
        document.getElementById('celestial-body').innerHTML = isDayMode ? sunIcon : moonIcon;
        const favicon = document.getElementById('dynamic-favicon');
        const svgForFavicon = (isDayMode ? sunIcon : moonIcon).replace('<svg', '<svg xmlns="http://www.w3.org/2000/svg"');
        favicon.href = `data:image/svg+xml,${encodeURIComponent(svgForFavicon)}`;
    }

    function updateUI() {
        document.getElementById('total-time').innerText = formatTime(totalSeconds);
        document.getElementById('today-time').innerText = formatTime(todaySeconds).substring(5);

        const dayOfYear = Math.floor((new Date() - new Date(new Date().getFullYear(), 0, 0)) / 86400000);
        const yearPercent = (dayOfYear / 365 * 100).toFixed(2);
        document.getElementById('year-stats').innerText = `${dayOfYear}/365 DAYS (${yearPercent}%)`;
        document.getElementById('year-bar').style.width = yearPercent + '%';

        const h = totalSeconds / 3600;
        if (Math.floor(h/5) > lastCelebrated && h > 0) { launchCelebration(); lastCelebrated = Math.floor(h/5); localStorage.setItem('px_last_milestone', lastCelebrated); }
        
        const todayStr = new Date().toLocaleDateString();
        historyData[todayStr] = todaySeconds;
        localStorage.setItem('px_total', totalSeconds);
        localStorage.setItem('px_today', todaySeconds);
        localStorage.setItem('px_history', JSON.stringify(historyData));
    }

    const canvas = document.getElementById('fireworks-canvas');
    const ctx = canvas.getContext('2d');
    let particles = [];
    window.addEventListener('resize', () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; });
    window.dispatchEvent(new Event('resize'));

    class Particle {
        constructor(x, y, color) {
            this.x = x; this.y = y; this.color = color;
            this.vx = (Math.random() - 0.5) * 12; this.vy = (Math.random() - 0.5) * 12;
            this.alpha = 1;
        }
        update() { this.x += this.vx; this.y += this.vy; this.vy += 0.2; this.alpha -= 0.015; }
        draw() { ctx.globalAlpha = this.alpha; ctx.fillStyle = this.color; ctx.fillRect(Math.floor(this.x), Math.floor(this.y), 4, 4); }
    }

    function launchCelebration() {
        const colors = ['#33ff33', '#ffffff', '#ffeb3b', '#ff4081'];
        for(let i=0; i<80; i++) particles.push(new Particle(window.innerWidth/2, window.innerHeight/2, colors[Math.floor(Math.random()*colors.length)]));
        fetchQuote();
    }

    function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        particles = particles.filter(p => p.alpha > 0);
        particles.forEach(p => { p.update(); p.draw(); });
        requestAnimationFrame(animate);
    }
    animate();

    function fetchQuote() {
        const content = document.getElementById('quote-content');
        if (content.style.color === 'var(--text-primary)') return;
        content.style.opacity = 0;
        setTimeout(() => {
            content.innerText = baseQuotes[Math.floor(Math.random() * baseQuotes.length)];
            content.style.opacity = 1;
        }, 500);
    }

    document.getElementById('start-btn').onclick = () => { if(!isRunning){ isRunning=true; timerInterval=setInterval(()=>{totalSeconds+=1; todaySeconds+=1; updateUI();}, 1000); }};
    document.getElementById('pause-btn').onclick = () => { isRunning=false; clearInterval(timerInterval); };
    document.getElementById('reset-btn').onclick = () => { if(confirm("Reset Journey?")){ totalSeconds=0; todaySeconds=0; historyData={}; updateUI(); }};
    document.getElementById('edit-total').onclick = () => { let v=prompt("Hours:", (totalSeconds/3600).toFixed(2)); if(v) { totalSeconds=v*3600; updateUI(); }};
    document.getElementById('edit-today').onclick = () => { let v=prompt("Hours:", (todaySeconds/3600).toFixed(2)); if(v) { todaySeconds=v*3600; updateUI(); }};
    document.getElementById('celestial-body').onclick = (e) => { e.stopPropagation(); isDayMode = !isDayMode; renderTheme(); };

    if (localStorage.getItem('px_date') !== new Date().toLocaleDateString()) { 
        todaySeconds = 0; localStorage.setItem('px_date', new Date().toLocaleDateString()); 
    }
    
    renderTheme(); updateUI(); fetchQuote();
    setInterval(fetchQuote, 10000);
</script>

</body></html>